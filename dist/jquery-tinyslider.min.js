/*! jQuery TinySlider - v0.3.0 - 2013-11-21
* https://github.com/amazingSurge/jquery-tinySlider
* Copyright (c) 2013 amazingSurge; Licensed GPL */
(function(t,e,i,n){"use strict";var a=i.TinySlider=function(n,o){this.element=n,this.$element=i(n);var s=[];i.each(this.$element.data(),function(t,e){var i=RegExp("^tinyslider","i");i.test(t)&&(s[t.toLowerCase().replace(i,"")]=e)}),this.options=i.extend(!0,{},a.defaults,o,s);var r=this.options.namespace;this.classes={},this.classes.activeSlide=r+"-slide_active",this.classes.activePager=r+"-pager_active",this.$element.addClass(r+"-container"),this.$ul=this.$element.children("ul"),this.$viewport=this.$ul.wrap('<div class="'+r+'-viewport" />').parent(),this.$slides=this.$ul.children();var u=this;i.extend(u,{init:function(){u.options.pager&&this.pager.setup(),u.options.nav&&this.nav.setup(),u.options.random&&(u.$slides.sort(function(){return Math.round(Math.random())-.5}),u.$ul.empty().append(u.$slides)),u.animations[u.options.animation].setup(),u.$viewport.attr("data-animation",u.options.animation),u.$viewport.on("go",function(t,e){t.stopPropagation(),u.$viewport.trigger("animation_start",{current:u.current,index:e.index}),u.animations[u.options.animation].run(e)}),u.current=0,u.wait=null,u.cycle=!1,u.isSliding=!1,u.active(u.current),"function"==typeof u.options.onStart&&u.options.onStart.call(u),u.options.autoplay&&(u.autoplay.enabled=!0,u.autoplay.start()),u.options.pauseOnHover&&u.$viewport.hover(function(){u.autoplay.enabled&&u.pause()},function(){u.autoplay.enabled&&u.play()}),u.options.touch&&u.touch.setup(),u.$viewport.on("animation_start",function(t,e){t.stopPropagation(),u.isSliding=!0,"function"==typeof u.options.onBefore&&u.options.onBefore.call(u,e)}),u.$viewport.on("animation_end",function(t,e){t.stopPropagation(),u.isSliding=!1,u.current=e.index,u.active(e.index),"function"==typeof u.options.onAfter&&u.options.onAfter.call(u,e),u.wait?u.goTo(u.wait):u.autoplay.enabled&&u.autoplay.start()})},autoplay:{enabled:!1,timeout:null,start:function(){u.autoplay.timeout&&clearTimeout(u.autoplay.timeout),u.autoplay.timeout=setTimeout(function(){u.go()},u.options.delay)},stop:function(){clearTimeout(u.autoplay.timeout)}},active:function(t){u.$slides.removeClass(u.classes.activeSlide).eq(t).addClass(u.classes.activeSlide)},pager:{setup:function(){u.$pager=i('<ul class="'+r+'-pager" />');var t=[];u.$slides.each(function(e){var i=e+1;t+="<li><a href='#'>"+i+"</a>"+"</li>"}),u.$pager.append(t),u.$pager.appendTo(u.$element),u.pager.$items=u.$pager.children(),u.pager.bind()},bind:function(){u.$viewport.on("go",function(t,e){u.pager.active(e.index)}),u.$pager.delegate("li","click",function(){return u.goTo(i(this).index()),!1})},active:function(t){u.pager.$items.removeClass(u.classes.activePager).eq(t).addClass(u.classes.activePager)}},nav:{setup:function(){u.$nav=i('<div class="'+r+'-nav">'+'<a href="#" class="'+r+'-nav-prev">'+u.options.prevText+"</a>"+'<a href="#" class="'+r+'-nav-next">'+u.options.nextText+"</a>"+"</div>"),u.$nav.appendTo(u.$element),u.$nav.delegate("a","click",function(){return i(this).is("."+r+"-nav-prev")?u.prev():u.next(),!1})}},animations:{fade:{setup:function(){},run:function(t){u.$slides.eq(u.current).fadeOut(u.options.duration,u.options.easing),u.$slides.eq(t.index).fadeIn(u.options.duration,u.options.easing,function(){u.$viewport.trigger("animation_end",{index:t.index})})}},slide:{setup:function(){var e=u.$viewport.width();u.$slides.width(e),u.$ul.width(100*u.$slides.length+"%"),i(t).on("resize",function(){var t=u.$viewport.width();u.$slides.width(t)})},run:function(t){var e=u.options.duration;t.jump&&(e/=2),u.cycle?(u.$ul.attr("data-cycle",u.cycle),u.$slides.eq(t.index).css("display","block"),u.$ul.width("200%"),"prev"===u.cycle?u.$ul.css("marginLeft","-100%").animate({marginLeft:null},e,u.options.easing,function(){u.$ul.attr("data-cycle",null),u.$slides.eq(t.index).css("display",null),u.$ul.css({width:100*u.$slides.length+"%",marginLeft:"-"+100*t.index+"%"}),u.cycle=!1,u.$viewport.trigger("animation_end",{index:t.index})}):u.$ul.css("marginLeft","0").animate({marginLeft:"-100%"},e,u.options.easing,function(){u.$ul.attr("data-cycle",null),u.$slides.eq(t.index).css("display",null),u.$ul.css({width:100*u.$slides.length+"%",marginLeft:"-"+100*t.index+"%"}),u.cycle=!1,u.$viewport.trigger("animation_end",{index:t.index})})):u.$ul.animate({marginLeft:"-"+100*t.index+"%"},e,u.options.easing,function(){u.$viewport.trigger("animation_end",{index:t.index})})}}},touch:{eventStartType:null,eventMoveType:null,eventEndType:null,touchSupported:!1,isTouchSupport:function(){return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch},setup:function(){this.touchSupported=this.isTouchSupport(),this.eventStartType=this.touchSupported?"touchstart":"mousedown",this.eventMoveType=this.touchSupported?"touchmove":"mousemove",this.eventEndType=this.touchSupported?"touchend":"mouseup",u.$viewport.on(this.eventStartType,i.proxy(this.eventStart,this))},getEventObject:function(t){var e=t.originalEvent;return u.touch.supported&&(e=e.touches[0]),e},eventStart:function(t){if(t.preventDefault(),u.isSliding)return!1;var n=this.getEventObject(t);return this.data={},this.data.start=n.pageX,this.width=u.$viewport.width(),i(e).on(this.eventMoveType,i.proxy(this.eventMove,this)).on(this.eventEndType,i.proxy(this.eventEnd,this)),!1},eventMove:function(t){t.preventDefault();var n=this.getEventObject(t);return this.data.distance=(n.pageX||this.data.start)-this.data.start,"fade"===u.options.animation?this.data.distance/this.width>u.options.touchSensitivity?(u.next(),i(e).off(this.eventMoveType)):this.data.distance/this.width<-u.options.touchSensitivity&&(u.prev(),i(e).off(this.eventMoveType)):u.$ul.css({marginLeft:-100*u.current+100*(this.data.distance/this.width)+"%"}),!1},eventEnd:function(t){if(t.preventDefault(),i(e).off(this.eventMoveType).off(this.eventEndType),"fade"===u.options.animation)return!1;var n=u.current-Math.round(this.data.distance/this.width);return 0>=n?n=0:n>=u.$slides.length-1&&(n=u.$slides.length-1),u.jumpTo(n),!1}}}),u.init()};a.defaults={namespace:"tiny",animation:"fade",easing:"swing",duration:1e3,delay:4e3,pager:!0,nav:!0,prevText:"Previous",nextText:"Next",random:!1,autoplay:!0,pauseOnHover:!0,touch:!0,touchSensitivity:.25,onStart:null,onBefore:null,onAfter:null,onEnd:null},a.prototype={constructor:a,play:function(){this.autoplay.enabled=!0,this.autoplay.start()},pause:function(){this.autoplay.stop()},stop:function(){this.autoplay.enabled=!1,this.autoplay.stop()},next:function(){var t=this.current+1;t>=this.$slides.length&&(t=0,this.cycle="next"),this.goTo(t)},prev:function(){var t=this.current-1;0>t&&(t=this.$slides.length-1,this.cycle="prev"),this.goTo(t)},go:function(){var t=this.current+1>=this.$slides.length?0:this.current+1;this.goTo(t)},goTo:function(t){return this.current===t?!1:(this.isSliding?this.wait=t:(this.wait=null,this.$viewport.trigger("go",{index:t})),n)},jumpTo:function(t){this.$viewport.trigger("go",{index:t,jump:!0})}},i.fn.tinySlider=function(t){if("string"==typeof t){var e=t,o=arguments.length>1?Array.prototype.slice.call(arguments,1):n;return this.each(function(){var t=i.data(this,"tinyslider");"function"==typeof t[e]&&t[e].apply(t,o)})}return this.each(function(){i.data(this,"tinyslider")||i.data(this,"tinyslider",new a(this,t))})}})(window,document,jQuery);